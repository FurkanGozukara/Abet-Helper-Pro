{% extends 'base.html' %}

{% block title %}Remote Access with Cloudflared - Accredit Helper Pro{% endblock %}

{% block breadcrumb %}
<li class="breadcrumb-item"><a href="{{ url_for('index') }}">Home</a></li>
<li class="breadcrumb-item"><a href="{{ url_for('utility.index') }}">Utilities</a></li>
<li class="breadcrumb-item active">Remote Access with Cloudflared</li>
{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1><i class="fas fa-cloud me-2"></i>Remote Access with Cloudflared</h1>
        <a href="{{ url_for('utility.index') }}" class="btn btn-outline-secondary">
            <i class="fas fa-arrow-left"></i> Back to Utilities
        </a>
    </div>

    <div class="card shadow-sm mb-4">
        <div class="card-header bg-primary text-white">
            <h4 class="mb-0"><i class="fas fa-globe me-2"></i>About Remote Access</h4>
        </div>
        <div class="card-body">
            <p class="lead">Accredit Helper Pro now supports secure remote access via Cloudflare Tunnel, allowing you to access your application from anywhere and share it with colleagues without complex network configuration.</p>

            <div class="alert alert-info">
                <i class="fas fa-info-circle me-2"></i><strong>What is Cloudflared?</strong> Cloudflared is a lightweight tunneling client from Cloudflare that creates a secure connection between your local application and Cloudflare's edge network. This tunnel allows you to expose your locally running app to the internet securely through a randomly generated URL.
            </div>

            <h5><i class="fas fa-star me-2"></i>Key Benefits</h5>
            <div class="row">
                <div class="col-md-6">
                    <ul class="list-group list-group-flush mb-3">
                        <li class="list-group-item"><i class="fas fa-check-circle text-success me-2"></i><strong>Access from Anywhere</strong> - Use your application from any device with an internet connection</li>
                        <li class="list-group-item"><i class="fas fa-check-circle text-success me-2"></i><strong>Easy Sharing</strong> - Share your application with colleagues by sharing the URL</li>
                        <li class="list-group-item"><i class="fas fa-check-circle text-success me-2"></i><strong>No Firewall Configuration</strong> - Works without changing network settings or router configuration</li>
                    </ul>
                </div>
                <div class="col-md-6">
                    <ul class="list-group list-group-flush mb-3">
                        <li class="list-group-item"><i class="fas fa-check-circle text-success me-2"></i><strong>Secure Connection</strong> - Traffic is encrypted between your device and Cloudflare's network</li>
                        <li class="list-group-item"><i class="fas fa-check-circle text-success me-2"></i><strong>No Account Required</strong> - Use the basic tunneling feature without creating an account</li>
                        <li class="list-group-item"><i class="fas fa-check-circle text-success me-2"></i><strong>Simple Setup</strong> - Just install cloudflared and run with the --cloud flag</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="card shadow-sm mb-4">
        <div class="card-header bg-success text-white">
            <h4 class="mb-0"><i class="fas fa-download me-2"></i>Installation Guide</h4>
        </div>
        <div class="card-body">
            <p>Before you can use the remote access feature, you need to install the cloudflared client on your computer:</p>

            <h5 class="mt-4"><i class="fab fa-windows me-2"></i>Windows Installation</h5>
            <ol>
                <li>Download the installer from <a href="https://developers.cloudflare.com/cloudflare-one/connections/connect-apps/install-and-setup/installation" target="_blank">Cloudflare's official website</a></li>
                <li>Run the installer and follow the on-screen instructions</li>
                <li>After installation, verify it works by opening a Command Prompt and typing: <code>cloudflared --version</code></li>
            </ol>

            <h5 class="mt-4"><i class="fab fa-apple me-2"></i>macOS Installation</h5>
            <ol>
                <li>Using Homebrew: <code>brew install cloudflare/cloudflare/cloudflared</code></li>
                <li>Alternatively, download the package from <a href="https://developers.cloudflare.com/cloudflare-one/connections/connect-apps/install-and-setup/installation" target="_blank">Cloudflare's official website</a></li>
                <li>Verify the installation by opening Terminal and typing: <code>cloudflared --version</code></li>
            </ol>

            <h5 class="mt-4"><i class="fab fa-linux me-2"></i>Linux Installation</h5>
            <ol>
                <li>For Debian/Ubuntu: <pre class="bg-light p-2">curl -L https://pkg.cloudflare.com/cloudflared-stable-linux-amd64.deb -o cloudflared.deb
sudo dpkg -i cloudflared.deb</pre></li>
                <li>For other distributions, follow the instructions on <a href="https://developers.cloudflare.com/cloudflare-one/connections/connect-apps/install-and-setup/installation" target="_blank">Cloudflare's website</a></li>
                <li>Verify the installation: <code>cloudflared --version</code></li>
            </ol>

            <div class="alert alert-warning mt-3">
                <i class="fas fa-exclamation-triangle me-2"></i><strong>Important:</strong> The cloudflared executable must be in your system's PATH for the application to use it automatically. If you installed it but the application can't find it, you may need to restart your computer or adjust your PATH environment variable.
            </div>
        </div>
    </div>

    <div class="card shadow-sm mb-4">
        <div class="card-header bg-info text-white">
            <h4 class="mb-0"><i class="fas fa-play-circle me-2"></i>Using Remote Access</h4>
        </div>
        <div class="card-body">
            <p>Once you have cloudflared installed, you can start Accredit Helper Pro with remote access enabled:</p>

            <h5><i class="fas fa-terminal me-2"></i>Starting with Remote Access</h5>
            <div class="row">
                <div class="col-md-6">
                    <div class="card mb-3">
                        <div class="card-header bg-light">
                            <h6 class="mb-0">Option 1: Using Windows Batch File</h6>
                        </div>
                        <div class="card-body">
                            <ol>
                                <li>Right-click on <code>Windows_Start.bat</code></li>
                                <li>Run the batch file with the parameter <code>--cloud</code>:
                                <pre class="bg-light p-2">Windows_Start.bat --cloud</pre></li>
                                <li>The console will display a public URL you can access from any device</li>
                            </ol>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card mb-3">
                        <div class="card-header bg-light">
                            <h6 class="mb-0">Option 2: Using Command Line</h6>
                        </div>
                        <div class="card-body">
                            <ol>
                                <li>Open a command prompt or terminal</li>
                                <li>Navigate to your application directory</li>
                                <li>Activate your virtual environment (if applicable)</li>
                                <li>Run the application with the <code>--cloud</code> flag:
                                <pre class="bg-light p-2">python app.py --cloud</pre></li>
                                <li>The console will display a public URL</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>

            <div class="alert alert-info mt-3">
                <i class="fas fa-link me-2"></i><strong>About the Public URL:</strong> The URL is generated randomly each time you start the application with the <code>--cloud</code> flag. It will look something like <code>https://some-random-words.trycloudflare.com</code>. This URL will remain active as long as your application is running.
            </div>

            <h5 class="mt-4"><i class="fas fa-share-alt me-2"></i>Sharing Access with Others</h5>
            <ol>
                <li>Start the application with the <code>--cloud</code> flag as described above</li>
                <li>Note the public URL displayed in the console</li>
                <li>Share this URL with colleagues or access it from your other devices</li>
                <li>Anyone with the URL can access your application until you close it</li>
            </ol>

            <div class="alert alert-warning mt-3">
                <i class="fas fa-shield-alt me-2"></i><strong>Security Note:</strong> While the connection is encrypted, anyone with the URL can access your application. Do not share the URL with untrusted parties. The URL is only active while your application is running - when you close the application, the URL becomes inactive.
            </div>
        </div>
    </div>

    <div class="card shadow-sm mb-4">
        <div class="card-header bg-secondary text-white">
            <h4 class="mb-0"><i class="fas fa-question-circle me-2"></i>Troubleshooting</h4>
        </div>
        <div class="card-body">
            <div class="accordion" id="troubleshootingAccordion">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingOne">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                            "cloudflared is not installed" error
                        </button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#troubleshootingAccordion">
                        <div class="accordion-body">
                            <p>If you see this error, it means the application couldn't find the cloudflared executable:</p>
                            <ol>
                                <li>Verify that cloudflared is installed by running <code>cloudflared --version</code> in a terminal</li>
                                <li>If the command is not found, reinstall cloudflared following the installation instructions</li>
                                <li>If installed but still not working, try restarting your computer</li>
                                <li>For advanced users: ensure the cloudflared executable is in your system's PATH</li>
                            </ol>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingTwo">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                            No public URL appears in the console
                        </button>
                    </h2>
                    <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#troubleshootingAccordion">
                        <div class="accordion-body">
                            <p>If the application starts but no public URL is displayed:</p>
                            <ol>
                                <li>Check that you included the <code>--cloud</code> flag when starting the application</li>
                                <li>Look carefully through the console output for any errors related to cloudflared</li>
                                <li>Ensure that outbound connections to Cloudflare's servers are not blocked by a firewall</li>
                                <li>Try running cloudflared manually to test if it works:
                                <pre class="bg-light p-2">cloudflared tunnel --url http://localhost:5000</pre></li>
                            </ol>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingThree">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                            Remote devices can't connect to the public URL
                        </button>
                    </h2>
                    <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#troubleshootingAccordion">
                        <div class="accordion-body">
                            <p>If you or others cannot access the application via the public URL:</p>
                            <ol>
                                <li>Verify that your application is still running locally</li>
                                <li>Check that you're using the exact URL displayed in the console</li>
                                <li>Ensure the remote device has internet access and can reach Cloudflare's services</li>
                                <li>Try accessing the URL from a different browser or device</li>
                                <li>Restart the application with the <code>--cloud</code> flag to generate a new URL</li>
                            </ol>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingFour">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                            Performance is slow on remote devices
                        </button>
                    </h2>
                    <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#troubleshootingAccordion">
                        <div class="accordion-body">
                            <p>If the application is running slowly when accessed remotely:</p>
                            <ol>
                                <li>This is normal to some extent - data must travel through the internet</li>
                                <li>Check your local internet connection upload speed</li>
                                <li>Limit large data transfers when using remote access</li>
                                <li>For better performance with large datasets, consider using the application locally</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="alert alert-primary mt-4">
        <div class="d-flex">
            <div class="me-3">
                <i class="fas fa-lightbulb fa-2x"></i>
            </div>
            <div>
                <h5 class="alert-heading">Pro Tip: Creating a Shortcut</h5>
                <p>For quick access to the remote version, you can create a desktop shortcut:</p>
                <ol class="mb-0">
                    <li>Create a shortcut to <code>Windows_Start.bat</code></li>
                    <li>Right-click the shortcut and select Properties</li>
                    <li>In the Target field, add <code>--cloud</code> at the end of the path</li>
                    <li>Rename the shortcut to something like "Accredit Helper Pro - Remote"</li>
                    <li>Click OK to save</li>
                </ol>
            </div>
        </div>
    </div>

    <div class="text-center mt-4 mb-4">
        <a href="{{ url_for('utility.index') }}" class="btn btn-primary">
            <i class="fas fa-arrow-left me-2"></i>Return to Utilities
        </a>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
    $(document).ready(function() {
        // Additional scripts for cloud help page if needed
    });
</script>
{% endblock %} 